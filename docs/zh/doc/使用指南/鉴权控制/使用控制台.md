# 使用控制台

## 服务端开启鉴权

1. 参考安装步骤：[集群安装](https://polarismesh.cn/zh/doc/%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8/%E5%AE%89%E8%A3%85%E6%9C%8D%E5%8A%A1%E7%AB%AF/%E5%AE%89%E8%A3%85%E9%9B%86%E7%BE%A4%E7%89%88.html#%E9%9B%86%E7%BE%A4%E7%89%88%E5%AE%89%E8%A3%85)
2. 参考示例修改每个**polaris**部署节点中的`polaris-server.yaml`文件
    ```yaml
    auth:
    # 鉴权插件
    name: defaultAuth
    option:
      # token 加密的 salt，如有自定义需求，需要在首次部署时指定
      salt: polarismesh@2021
      # 鉴权能力开关
      open: true
    ```

    - 如果有修改 salt 的需要，则需要按照以下步骤执行
      - 确定最终的 salt 值并将其修改至`polaris-server.yaml`中
      - 执行**auth/defaultauth/token_test.go**中的`TestCreateToken`函数，生成新的`token`
      - 执行下列SQL
        ```sql
        INSERT INTO
            `user` (
                `id`,
                `name`,
                `password`,
                `source`,
                `token`,
                `token_enable`,
                `user_type`,
                `comment`,
                `owner`
            )
        VALUES
            (
                '65e4789a6d5b49669adf1e9e8387549c',
                'polaris',
                '$2a$10$5XMjs.oqo4PnpbTGy9dQqewL4eb4yoA7b/6ZKL33IPhFyIxzj4lRy',
                'Polaris',
                '${新的token}',
                1,
                20,
                'default polaris admin account',
                ''
            );
        ```
      - 这样就完成了主账户的`token`变更

## 如何创建鉴权策略

- 单击新建策略。填写策略基本信息，在角色栏可以选择需要授权用户或用户组，单击下一步选择授权的资源。
  ![](./create_strategy.png)
- 在资源栏可选择北极星的资源类型，包括命名空间、服务等资源，主账号可对所有资源进行操作。
  ![](./create_strategy_resource.png)
- 单击下一步，进入预览界面，详细展示该策略涉及的用户、用户组以及资源。确认信息无误后，单击完成。
  ![](./create_strategy_preview.png)
- 主账号可在权限策略列表查阅现有的权限策略，可单击编辑进行授权或删除等操作。
  ![](./strategy_list.png)


## 新建资源如何选择可操作用户

### 创建命名空间

- 在命名空间页面中，点击新建，在弹出页面中，点击高级选择可以操作本资源的用户或者用户组
  ![](./create_namespace.png)

### 创建服务

- 在服务列表页面中，点击新建，在弹出页面中，点击高级选择可以操作本资源的用户或者用户组
  ![](./create_service.png)
