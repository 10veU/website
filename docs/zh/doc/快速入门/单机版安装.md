# 单机版安装

北极星单机版仅供体验或者开发测试环境使用。生产环境请安装集群版

## 安装说明

北极星单机版包含以下4个组件：

- polaris-console：控制台
- polaris-server：控制面
- prometheus：单机版依赖的监控插件
- pushgateway：单机版依赖的监控组件

北极星单机版默认占用以下端口：

- polaris-console：8080(http/tcp)
- polaris-server：8090(http/tcp)、8091(grpc/tcp)
- prometheus：9090(tcp)
- pushgateway：9091(tcp)

## 安装服务端

### 环境准备

北极星单机版支持以下4种运行环境：

- Linux（64位）
- Windows（64位）
- Mac（64位）
- 容器化

### Linux

从北极星[releases](https://github.com/polarismesh/polaris/releases)下载Linux单机版软件包，执行安装命令：

```bash
unzip polaris-standalone-release_$version.linux.$arch.zip

cd polaris-standalone-release_$version.linux.$arch

bash install.sh
```

### Windows

注意事项：

- 依赖powershell 5.0及以上版本（Windows 10及以上版本默认安装）
- 需要以管理员身份运行安装脚本，执行powershell需要进行授权操作
- 安装脚本可能遭到系统安全软件的误杀，请在安全软件中执行信任操作

从北极星[releases](https://github.com/polarismesh/polaris/releases)下载Windows单机版软件包，执行安装命令：

```bash
执行解压：polaris-standalone-release_$version.windows.$arch.zip

进入目录：polaris-standalone-release_$version.windows.$arch

执行脚本：install.bat
```

### Mac

注意事项：

- 请在【关于本机】设置中查看Mac机器的芯片类型（Intel/Apple）
- Intel芯片请使用amd64的软件包，Apple芯片请使用arm64的软件包

从北极星[releases](https://github.com/polarismesh/polaris/releases)下载Mac单机版软件包，执行安装命令：

```bash
unzip polaris-standalone-release_$version.darwin.$arch.zip

cd polaris-standalone-release_$version.darwin.$arch

bash install.sh
```

### 容器化

注意事项：

- 部署文档使用的是LoadBalancer类型的service。如果您需要从k8s集群外访问北极星，且您的k8s集群不支持LoadBalancer，可以修改`installk8s/02-polaris-server.yaml`、`installk8s/polaris-prometheus.yaml`中service的类型，调整为NodePort。如果您的集群支持ingress，也可以通过ingress从集群外访问。

从北极星[releases](https://github.com/polarismesh/polaris/releases)下载源码包，将源码包拷贝到配置好kubectl的机器上，执行安装命令：

```bash
# 将下面的 x.x.x 替换为您下载的源码包的版本
unzip polaris-x.x.x.zip
cd polaris-x.x.x/standalone
kubectl create -f installk8s/
```


## 安装验证

### 打开控制台

在浏览器里输入北极星控制台地址（127.0.0.1:8080），127.0.0.1可替换成安装北极星的机器host。

容器场景需要将127.0.0.1:8080替换为集群外可访问的service的地址。

![控制台](./图片/单机版安装/控制台.png)

### 新建服务

进入服务列表页面，点击【新建】按钮，确认是否可以新建服务。新建服务成功表示安装成功

![新建服务](./图片/单机版安装/新建服务.png)
